<!DOCTYPE html>
<html>
<head>
    <title>Claim Policy</title>
</head>
<body>

<h2>Policy Claim Form</h2>

<div>
    <p><strong>Policy Name:</strong> <span id="policyName"></span></p>
    <p><strong>Coverage Amount:</strong> <span id="coverageAmount"></span></p>
    <p><strong>Premium:</strong> <span id="premiumAmount"></span></p>
    <p><strong>Status:</strong> <span id="policyStatus"></span></p>
</div>

<hr>

<form>
    <p>Location: <input type="text" id="location"></p>
    <p>Description: <input type="text" id="description"></p>
    <p>Claim Amount: <input type="text" id="amount"></p>
    <p>Claim Date: <input type="text" id="date"></p>
    <p>Documents: <input type="file" id="docs"></p>
    <button type="button" onclick="submitClaim()">Submit Claim</button>
</form>

<script>
    // Fetch policy data securely from backend
    async function loadPolicyData() {
        try {
            const response = await fetch("/get-policy-data", {
                credentials: 'include'  // Required for cookies
            });

            if (response.ok) {
                const data = await response.json();

                // Display policy info
                document.getElementById('policyName').textContent = data.name;
                document.getElementById('coverageAmount').textContent = data.coverage;
                document.getElementById('premiumAmount').textContent = data.premium;
                document.getElementById('policyStatus').textContent = data.status ? "Active" : "Inactive";
            } else {
                console.error("Failed to load policy data");
            }
        } catch (error) {
            console.error("Error:", error);
        }
    }

    // Load data when page opens
    loadPolicyData();

    function submitClaim() {
        alert("Claim submitted!");
        // Add actual submission logic here
    }
</script>

</body>
</html>