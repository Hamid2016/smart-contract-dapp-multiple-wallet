<!DOCTYPE html>
<html>
<head>
    <title>Claim Policy</title>
</head>
<body>

<h2>Policy Claim Form</h2>

<div>
    <p><strong>Policy Name:</strong> <span id="policyName"></span></p>
    <p><strong>Coverage Amount:</strong> <span id="coverageAmount"></span></p>
    <p><strong>Premium:</strong> <span id="premiumAmount"></span></p>
    <p><strong>Status:</strong> <span id="policyStatus"></span></p>
</div>

<hr>

<form>
    <p>Location:
      <input type="text" id="location" placeholder="Enter address" readonly
             onclick="window.open('https://www.google.com/maps', '_blank')">
    </p>    <p>Description: <input type="text" id="description"></p>
    <p>Claim Amount: <input type="text" id="amount"></p>
    <p>Claim Date: <input type="date" id="date"></p>
    <p>Documents-Front-Right: <input type="file" id="docs1"></p>
    <p>Documents-Front-Left: <input type="file" id="docs2"></p>
    <p>Documents-Back-right: <input type="file" id="docs3"></p>
    <p>Documents-Back-Left: <input type="file" id="docs4"></p>
<!--    <p>Documents: <input type="file" id="docs" multiple></p>-->
    <button type="button" onclick="submitClaim()">Submit Claim</button>
</form>

<script>
    // Fetch policy data securely from backend
    async function loadPolicyData() {
        try {
                const response = await fetch("/get-policy-data", {
                method: "POST",  // ðŸ‘ˆ Changed from GET to POST
                credentials: "include",  // Still required for cookies
                headers: {
                    "Content-Type": "application/json",
                },
                body: JSON.stringify({}),  // Empty body (or add data if needed)
            });

            if (response.ok) {
                const data = await response.json();

                // Display policy info
                document.getElementById('policyName').textContent = data.name;
                document.getElementById('coverageAmount').textContent = data.coverage;
                document.getElementById('premiumAmount').textContent = data.premium;
                document.getElementById('policyStatus').textContent = data.status ? "Active" : "Inactive";
            } else {
                console.error("Failed to load policy data");
            }
        } catch (error) {
            console.error("Error:", error);
        }
    }

    // Load data when page opens
    loadPolicyData();

    function submitClaim() {
        alert("Claim submitted!");
        // Add actual submission logic here
    }
</script>

</body>
</html>